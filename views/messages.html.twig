<html>
    <head>
        <title>Messages</title>
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css">
        <link rel="stylesheet" type="text/css" href="/css/main.css">
    </head>
    <body>

        <header><h1 class="titre">Welcome to Message Board</h1></header>


        <div class="row">

            <div class="col-md-3 searchby">

                <h3>Search by Tags</h3>
                {% for tag in all_tags %}
                    <a href="/messages/{{ tag.getId }}"><li>{{ tag.getName }}</li></a>
                {% endfor %}

                <hr size="1">

                <form action="/user_messages" method="post">

                    <h3>Search by Users</h3>

                    <select class='select form-control' name='user' type='text'>
                        {% for user in users %}
                            <option value="{{ user.getId }}"> {{ user.getName }} </option>
                        {% endfor %}
                    </select>

                    <button type="submit" class="btn btn-info" style="margin: 20px 0 0 15px">View posts</button>

                </form>

            </div>

            <div class="col-md-8 col-md-offset-4 newpost">

                     <h3 style="text-align: right; background-color: rgb(153, 255, 235); color: white; padding-right: 40px">NEW POST</h3>

                <form action="/add_message" method="post" style="padding: 0 10px 0 10px">

                        <input type="hidden" name="user_id" value="{{ user.getId }}">
                        <label for="message">Select a tag :</label> <br>
                        <select class='select form-control' name='tag' type='text'>
                          {% for tag in all_tags %}
                            <option value="{{ tag.getId }}"> {{ tag.getName }} </option>
                          {% endfor %}
                        </select> <br>
                        <label for="message" style="margin-top: 15px">Message :</label> <br>
                        <textarea rows="4" cols="80" name='message'> </textarea>
                        <button type="submit" class='btn btn-warning' style="float: right; margin: 10px 40px 10px 0">Add Message</button>
                </form>

            </div>

        </div>

            <hr size="1">

            {% if messages is not empty %}

                {% for message in messages %}

                <h3>{{ message.getUserName }}</h3>
                <p>{{ message.getTheDate }}</p>

                {% if message.getTags is not empty %}

                    {% for tag in message.getTags %}

                        <p>
                            {{ tag.getName() }}
                        </p>
                    {% endfor %}

                {% endif %}

                <textarea rows="4" cols="50" name='message'>{{ message.getMessage }}</textarea>

                {% endfor %}


            {% endif %}

        
    </body>
</html>
